const e={DIGITS:"123456789"},t=e.DIGITS;let n=null,r=null,i=null,l=null;const o={easy:62,medium:53,hard:44,"very-hard":35,insane:26,inhuman:17};function u(t,n){return e.generate(t,n)}function f(t,n){return e.solve(t,n)}function a(t){return e.get_candidates(t)}function _(t){return e.board_string_to_grid(t)}function s(t){return e.print_board(t)}function g(t){return e.validate_board(t)}e.BLANK_CHAR=".",e.BLANK_BOARD=".................................................................................",e.generate=function(t,r){"string"!=typeof t&&void 0!==t||(t=o[t]||o.easy),t=e._force_range(t,82,17);let i="";for(let e=0;e<81;++e)i+=".";const l=e._get_candidates_map(i),u=e._shuffle(n);for(let r in u){let i=u[r],o=e._rand_range(l[i].length),f=l[i][o];if(!e._assign(l,i,f))break;let a=[];for(let e in n){let t=n[e];1==l[t].length&&a.push(l[t])}if(a.length>=t&&e._strip_dups(a).length>=8){let r="",i=[];for(let t in n){let o=n[t];1==l[o].length?(r+=l[o],i.push(t)):r+=e.BLANK_CHAR}let o=i.length;if(o>t){i=e._shuffle(i);for(let n=0;n<o-t;++n){let t=parseInt(i[n]);r=r.substr(0,t)+e.BLANK_CHAR+r.substr(t+1)}}if(e.solve(r))return r}}return e.generate(t)},e.solve=function(t,n){let r=e.validate_board(t);if(!0!==r)throw r;let i=0;for(let n in t)t[n]!==e.BLANK_CHAR&&e._in(t[n],e.DIGITS)&&++i;if(i<17)throw"Too few givens. Minimum givens is 17";n=n||!1;let l=e._get_candidates_map(t),o=e._search(l,n);if(o){let e="";for(let t in o)e+=o[t];return e}return!1},e.get_candidates=function(t){let n=e.validate_board(t);if(!0!==n)throw n;let r=e._get_candidates_map(t);if(!r)return!1;let i=[],l=[],o=0;for(let e in r){let t=r[e];l.push(t),o%9==8&&(i.push(l),l=[]),++o}return i},e._get_candidates_map=function(t){let r=e.validate_board(t);if(!0!==r)throw r;let i={},l=e._get_square_vals_map(t);for(let t in n)i[n[t]]=e.DIGITS;for(let t in l){let n=l[t];if(e._in(n,e.DIGITS)){if(!e._assign(i,t,n))return!1}}return i},e._search=function(t,r){if(!t)return!1;r=r||!1;let i=0;for(let e in n){let r=t[n[e]].length;r>i&&(i=r)}if(1===i)return t;let l=10,o=null;for(let e in n){let r=n[e],i=t[r].length;i<l&&i>1&&(l=i,o=r)}let u=t[o];if(r)for(let n=u.length-1;n>=0;--n){let i=u[n],l=JSON.parse(JSON.stringify(t)),f=e._search(e._assign(l,o,i),r);if(f)return f}else for(let n in u){let r=u[n],i=JSON.parse(JSON.stringify(t)),l=e._search(e._assign(i,o,r));if(l)return l}return!1},e._assign=function(t,n,r){let i=t[n].replace(r,"");for(let r in i){let l=i[r];if(!e._eliminate(t,n,l))return!1}return t},e._eliminate=function(t,n,r){if(!e._in(r,t[n]))return t;t[n]=t[n].replace(r,"");let o=t[n].length;if(1===o){let r=t[n];for(let i in l[n]){let o=l[n][i];if(!e._eliminate(t,o,r))return!1}}if(0===o)return!1;for(let l in i[n]){let o=i[n][l],u=[];for(let n in o){let i=o[n];e._in(r,t[i])&&u.push(i)}if(0===u.length)return!1;if(1===u.length){if(!e._assign(t,u[0],r))return!1}}return t},e._get_square_vals_map=function(e){let t={};if(e.length!=n.length)throw"Board/squares length mismatch.";for(let r in n)t[n[r]]=e[r];return t},e._get_square_units_map=function(e,t){let n={};for(let r in e){let i=e[r],l=[];for(let e in t){let n=t[e];-1!==n.indexOf(i)&&l.push(n)}n[i]=l}return n},e._get_square_peers_map=function(e,t){let n={};for(let r in e){let i=e[r],l=t[i],o=[];for(let e in l){let t=l[e];for(let e in t){let n=t[e];-1===o.indexOf(n)&&n!==i&&o.push(n)}}n[i]=o}return n},e._get_all_units=function(t,n){let r=[];for(let i in t)r.push(e._cross(t[i],n));for(let i in n)r.push(e._cross(t,n[i]));let i=["ABC","DEF","GHI"],l=["123","456","789"];for(let t in i)for(let n in l)r.push(e._cross(i[t],l[n]));return r},e.board_string_to_grid=function(e){let t=[],n=[];for(let r in e)n.push(e[r]),r%9==8&&(t.push(n),n=[]);return t},e.board_grid_to_string=function(e){let t="";for(let n=0;n<9;++n)for(let r=0;r<9;++r)t+=e[n][r];return t},e.print_board=function(t){let n=e.validate_board(t);if(!0!==n)throw n;let r="";for(let e in t){r+=t[e]+" ",e%3==2&&(r+="  "),e%9==8&&(r+="\n"),e%27==26&&(r+="\n")}console.log(r)},e.validate_board=function(t){if(!t)return"Empty board";if(81!==t.length)return"Invalid board size. Board must be exactly 81 squares.";for(let n in t)if(!e._in(t[n],e.DIGITS)&&t[n]!==e.BLANK_CHAR)return"Invalid board character encountered at index "+n+": "+t[n];return!0},e._cross=function(e,t){let n=[];for(let r in e)for(let i in t)n.push(e[r]+t[i]);return n},e._in=function(e,t){return-1!==t.indexOf(e)},e._first_true=function(e){for(let t in e)if(e[t])return e[t];return!1},e._shuffle=function(t){const n=[];for(let e=0;e<t.length;++e)n.push(!1);for(let r in t){let i=e._rand_range(t.length);for(;n[i];)i=i+1>t.length-1?0:i+1;n[i]=t[r]}return n},e._rand_range=function(e,t){if(t=t||0,e)return Math.floor(Math.random()*(e-t))+t;throw"Range undefined"},e._strip_dups=function(e){let t=[],n={};for(let r in e){let i=e[r];n[i]||(t.push(i),n[i]=!0)}return t},e._force_range=function(e,t,n){return(e=e||0)<(n=n||0)?n:e>t?t:e},n=e._cross("ABCDEFGHI",t),r=e._get_all_units("ABCDEFGHI",t),i=e._get_square_units_map(n,r),l=e._get_square_peers_map(n,i);export default e;export{_ as board_string_to_grid,u as generate,a as get_candidates,s as print_board,f as solve,g as validate_board};
//# sourceMappingURL=sudoku.esm.js.map
